{% extends 'Blimp/base.html' %}
{% load comments %}

{% block content %}

    <ul class="post-list">
    {% include "Blimp/post_info.html" %}
    </ul>

    {% get_comment_count for object as comment_count %}
    <p class="post-info"><a href="#comments">{{ comment_count }} 
        comment{{ comment_count|pluralize }}</a></p>

    {% get_comment_list for object as comments %}
    <ul id="comments">
        {% for comment in comments %}
            <li class='comment'>
                <p><a href="{{ comment.get_absolute_url }}" title="permalink">#</a></p>
                {% if comment.user_url %}
                    <h4><a href="{{ comment.user_url }}">{{ comment.name }}</a></h4>
                {% else %}
                    <h4>{{ comment.user_name }}</h4>
                {% endif %}
                <p class="post-info">{{ comment.submit_date|date:"D M d, Y @ f a" }}</p>
                <div class="comment-body">{{ comment.comment }}</div>
            </li>
        {% endfor %}
    </ul>

    <div id="comment-reply">
    {% if object.comments_open %}
        {% render_comment_form for object %}
    {% else %}
        <p><strong>Comments are closed.</strong></p>
        <p>Comments get closed two weeks after a post is published. You can
        still <a href="{% url blimp_contact %}">contact me</a>, though.</p>
    {% endif %}
    </div>

{% endblock %}
