{% extends 'Blimp/base.html' %}
{% load comments %}

{% block content %}

    <ul class="post-list">
    {% include "Blimp/post_info.html" %}
    </ul>

    {% get_comment_count for object as comment_count %}
    <p class="post-info"><a href="#comments">{{ comment_count }} 
        comment{{ comment_count|pluralize }}</a></p>

    {% get_comment_list for object as comments %}
    <dl id="comments">
        {% for comment in comments %}
            {% if comment.user_url %}
                <dt><a href="{{ comment.user_url }}">{{ comment.user_name }}</a> 
                    <span>{{ comment.submit_date }}</span></dt>
            {% else %}
                <dt>{{ comment.user_name }} 
                    <span>{{ comment.submit_date }}</span></dt>
            {% endif %}
            <dd>{{ comment.comment }}</dd>
        {% endfor %}
    </dl>

    <div id="comment-reply">
    {% if object.comments_open %}
        {% render_comment_form for object %}
    {% else %}
        <p><strong>Comments are closed.</strong></p>
        <p>Comments get closed two weeks after a post is published. You can
        still <a href="{% url blimp_contact %}">contact me</a>, though.</p>
    {% endif %}
    </div>

{% endblock %}
